var nodes = [
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "9e4f3a6ca16e3d02",
    "type": "System",
    "showname": "1016964156",
    "tooltip": "[System]",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "663adbb079ffd86c",
    "type": "Mappingview",
    "showname": "MappingView003",
    "extinfo": "Type:Mappingview<br/>Name:MappingView003",
    "isselected": true
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "eb537ff4bbbde925",
    "type": "Hostgroup",
    "showname": "HostGroup003",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "f127b2e34a4d9dd6",
    "type": "Portgroup",
    "showname": "PortGroup001",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "dedcd16b28ee9972",
    "type": "Lungroup",
    "showname": "LUNGroup003",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "fc212bddc7a8dee6",
    "type": "Host",
    "showname": "Host003",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "94aec67148292e69",
    "type": "Host",
    "showname": "Host004",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "061e42e2ca388aa4",
    "type": "Port",
    "showname": "CTE0.A4.P0",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "0c0eb8e739584c92",
    "type": "Port",
    "showname": "CTE0.A4.P1",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "1bb5affaf3ad46e8",
    "type": "Port",
    "showname": "CTE0.B4.P0",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "7ea29a562a9953d0",
    "type": "Port",
    "showname": "CTE0.B4.P1",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "e63b8cd8d0c0437f",
    "type": "Port",
    "showname": "CTE0.A2.P0",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "2e371cdc65a14898",
    "type": "Port",
    "showname": "CTE0.A2.P1",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "72da57a0b8dd2b80",
    "type": "lun",
    "showname": "LUN0080003",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "14ba692e55983e46",
    "type": "lun",
    "showname": "LUN0080004",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "81eb94bbf58e28c3",
    "type": "lun",
    "showname": "LUN0080005",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "00ea6b89ad95c60d",
    "type": "lun",
    "showname": "LUN0080006",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "a88fc40c03e2d8d1",
    "type": "lun",
    "showname": "LUN0010005",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "73aa073350428079",
    "type": "lun",
    "showname": "LUN0010006",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "ab45a9863140d65c",
    "type": "lun",
    "showname": "LUN0080000",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "c5ab5f56c88ca6cb",
    "type": "lun",
    "showname": "LUN0080001",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "2e6adf83d7194fdc",
    "type": "lun",
    "showname": "LUN0080002",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "28944578f8cdde10",
    "type": "initiator",
    "showname": "1414141414141414",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "79264469e3ee7527",
    "type": "initiator",
    "showname": "1515151515151515",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "10003           ",
    "type": "server",
    "showname": "Power-Host2",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "10002           ",
    "type": "server",
    "showname": "Power-Host1",
    "tooltip": "",
    "isselected": false
  },
  {
    "_uid": "9e4f3a6ca16e3d02",
    "name": "20001           ",
    "type": "app",
    "showname": "App2",
    "tooltip": "",
    "isselected": false
  }
]
    var links = [
  {
    "source": "9e4f3a6ca16e3d02",
    "target": "663adbb079ffd86c",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "663adbb079ffd86c",
    "target": "eb537ff4bbbde925",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "663adbb079ffd86c",
    "target": "f127b2e34a4d9dd6",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "663adbb079ffd86c",
    "target": "dedcd16b28ee9972",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "eb537ff4bbbde925",
    "target": "fc212bddc7a8dee6",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "eb537ff4bbbde925",
    "target": "94aec67148292e69",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "061e42e2ca388aa4",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "0c0eb8e739584c92",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "1bb5affaf3ad46e8",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "7ea29a562a9953d0",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "e63b8cd8d0c0437f",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "f127b2e34a4d9dd6",
    "target": "2e371cdc65a14898",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "72da57a0b8dd2b80",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "14ba692e55983e46",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "81eb94bbf58e28c3",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "00ea6b89ad95c60d",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "a88fc40c03e2d8d1",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "73aa073350428079",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "ab45a9863140d65c",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "c5ab5f56c88ca6cb",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "dedcd16b28ee9972",
    "target": "2e6adf83d7194fdc",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "fc212bddc7a8dee6",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "94aec67148292e69",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "061e42e2ca388aa4",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "0c0eb8e739584c92",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "1bb5affaf3ad46e8",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "7ea29a562a9953d0",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "e63b8cd8d0c0437f",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "2e371cdc65a14898",
    "target": "28944578f8cdde10",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "061e42e2ca388aa4",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "0c0eb8e739584c92",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "1bb5affaf3ad46e8",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "7ea29a562a9953d0",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "e63b8cd8d0c0437f",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "2e371cdc65a14898",
    "target": "79264469e3ee7527",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "28944578f8cdde10",
    "target": "10003           ",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "79264469e3ee7527",
    "target": "10002           ",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "10003           ",
    "target": "20001           ",
    "value": 1,
    "tooltip": ""
  },
  {
    "source": "10002           ",
    "target": "20001           ",
    "value": 1,
    "tooltip": ""
  }
]

    var charts = {
        nodes: [],
        links: []
    }

    //配置Node属性
    $.each(nodes, function (i, node) {

        var node = {
            name: node.name,
            showname: '[' + node.type + ']' + node.showname,
            isselected: node.isselected,
            extinfo:node.extinfo
        }


        //console.log(node.isselected);
        if (node.isselected) {
            node.itemStyle = {
                normal: {
                    color: "red",
                    //borderWidth: 1,
                    //borderColor: "red"
                }
            }

            //console.log(node);
        }
        charts.nodes.push(node)
    });


    //配置Link属性
    $.each(links, function (i, link) {
        var link = {
            source: link.source,
            target: link.target,
            value: link.value
        }
        charts.links.push(link)
    });

    option = {
        tooltip: {
            trigger: 'item',
            triggerOn: 'mousemove',
            formatter: function (params) {
                //console.log(params)
                return params.data.extinfo;
            }
        },
        series: [
            {
                type: 'sankey',
                layout: 'none',
                nodeAlign:'left',
                focusNodeAdjacency: true,
                layoutIterations:1024,
                draggable: false,
                itemStyle: {
                    normal: {
                        borderWidth: 1,
                        borderColor: '#aaa'
                    }
                },
                data: charts.nodes,
                links: charts.links,

                label: {
                    normal: {
                        textStyle: {
                            fontSize:10
                        },

                        formatter: function (params) {

                            return params.data.showname

                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: "source",
                        curveness: 0.5
                    }
                },
                itemStyle: {
                    normal: {
                        borderWidth: 1,
                        borderColor: "transparent"
                    }
                }
            }
        ]
    };