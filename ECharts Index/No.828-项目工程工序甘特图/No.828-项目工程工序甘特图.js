const projectData = {
  'projectName': '项目',
  'startDate': '2021-08-01T00:00:00.000+0800',
  'endDate': '2022-08-31T00:00:00.000+0800',
  'status': 1,
  'actuleRatio': 7.0000,
  'emergencyDegree': 1,
  'engineeringScheduleList': [{
    'engineeringScheduleId': 14116,
    'milestoneId': 916,
    'engineeringName': '龙湖集团:自建工程1',
    'startDate': '2021-08-01T00:00:00.000+0800',
    'endDate': '2021-08-31T00:00:00.000+0800',
    'status': 1,
    'actuleRatio': 10.000,
    'emergencyDegree': 1,
    'actualScheduleWorkday': 3,
    'planningScheduleWorkDays': 31,
    'processSchedules': [{
      'processScheduleId': 579,
      'processScheduleName': '龙湖集团:自建工序1-1😂😄',
      'startDate': '2021-08-01T00:00:00.000+0800',
      'endDate': '2021-08-31T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14132,
    'milestoneId': 916,
    'engineeringName': '龙湖集团:自建工程2😂😂',
    'startDate': '2021-08-01T00:00:00.000+0800',
    'endDate': '2021-08-31T00:00:00.000+0800',
    'status': 2,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 8,
    'planningScheduleWorkDays': 133,
    'processSchedules': [{
      'processScheduleId': 594,
      'processScheduleName': '龙湖集团:自建工序2-1',
      'startDate': '2021-08-01T00:00:00.000+0800',
      'endDate': '2021-08-31T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }, {
      'processScheduleId': 593,
      'processScheduleName': '龙湖集团:自建工序2-2',
      'startDate': '2021-08-04T00:00:00.000+0800',
      'endDate': '2021-08-05T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14131,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程3',
    'startDate': '2021-08-09T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 2,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 7,
    'planningScheduleWorkDays': 18,
    'processSchedules': [{
      'processScheduleId': 592,
      'processScheduleName': '龙湖集团:自建工序3-1',
      'startDate': '2021-08-08T00:00:00.000+0800',
      'endDate': '2021-08-16T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14136,
    'milestoneId': 916,
    'engineeringName': '龙湖集团:自建工程4',
    'startDate': '2021-08-11T00:00:00.000+0800',
    'endDate': '2021-08-31T00:00:00.000+0800',
    'status': 2,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 1,
    'planningScheduleWorkDays': 7,
    'processSchedules': [{
      'processScheduleId': 595,
      'processScheduleName': '龙湖集团:自建工序4-1',
      'startDate': '2021-08-11T00:00:00.000+0800',
      'endDate': '2021-08-11T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14137,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程5',
    'startDate': '2021-08-11T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }, {
    'engineeringScheduleId': 14138,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程6',
    'startDate': '2021-08-11T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 1,
    'actuleRatio': 3.0000,
    'emergencyDegree': 1,
    'actualScheduleWorkday': 6,
    'planningScheduleWorkDays': 204,
    'processSchedules': [{
      'processScheduleId': 634,
      'processScheduleName': '龙湖集团:自建工序6-1',
      'startDate': '2021-08-11T00:00:00.000+0800',
      'endDate': '2021-08-19T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }, {
      'processScheduleId': 640,
      'processScheduleName': '龙湖集团:自建工序6-2',
      'startDate': '2021-08-11T00:00:00.000+0800',
      'endDate': '2021-10-11T00:00:00.000+0800',
      'status': 1,
      'actuleRatio': 3.0000,
      'emergencyDegree': 1
    }]
  }, {
    'engineeringScheduleId': 14182,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程7',
    'startDate': '2021-08-20T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }, {
    'engineeringScheduleId': 14183,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程8',
    'startDate': '2021-08-23T00:00:00.000+0800',
    'endDate': '2021-10-31T00:00:00.000+0800',
    'status': 1,
    'actuleRatio': 0.000,
    'emergencyDegree': 1,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 78,
    'processSchedules': [{
      'processScheduleId': 649,
      'processScheduleName': '龙湖集团:自建工序8-1',
      'startDate': '2021-08-23T00:00:00.000+0800',
      'endDate': '2021-09-30T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14184,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程9',
    'startDate': '2021-08-24T00:00:00.000+0800',
    'endDate': '2021-12-31T00:00:00.000+0800',
    'status': 1,
    'actuleRatio': 21.0000,
    'emergencyDegree': 1,
    'actualScheduleWorkday': 13,
    'planningScheduleWorkDays': 62,
    'processSchedules': [{
      'processScheduleId': 655,
      'processScheduleName': '龙湖集团:自建工序9-1',
      'startDate': '2021-08-24T00:00:00.000+0800',
      'endDate': '2021-10-24T00:00:00.000+0800',
      'status': 2,
      'actuleRatio': null,
      'emergencyDegree': 0
    }]
  }, {
    'engineeringScheduleId': 14185,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程10',
    'startDate': '2021-08-24T00:00:00.000+0800',
    'endDate': '2021-11-30T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }, {
    'engineeringScheduleId': 14352,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程11',
    'startDate': '2021-10-13T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }, {
    'engineeringScheduleId': 14355,
    'milestoneId': 0,
    'engineeringName': '龙湖集团:自建工程12',
    'startDate': '2021-10-14T00:00:00.000+0800',
    'endDate': '2022-08-31T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }, {
    'engineeringScheduleId': 14504,
    'milestoneId': 917,
    'engineeringName': '龙湖集团:自建工程13',
    'startDate': '2021-10-25T00:00:00.000+0800',
    'endDate': '2021-12-30T00:00:00.000+0800',
    'status': 0,
    'actuleRatio': null,
    'emergencyDegree': 0,
    'actualScheduleWorkday': 0,
    'planningScheduleWorkDays': 0,
    'processSchedules': []
  }],
  'projectMilestoneList': [{
    'name': '开工',
    'code': '7',
    'deadline': '2021-08-01T00:00:00.000+0800',
    'emergencyDegree': 0,
    'milestoneRate': 0
  }, {
    'name': '出±0',
    'code': '1',
    'deadline': '2021-11-23T00:00:00.000+0800',
    'emergencyDegree': 1,
    'milestoneRate': 0.0702
  }, {
    'name': '主体结构完成',
    'code': '2',
    'deadline': '2021-12-30T00:00:00.000+0800',
    'emergencyDegree': 0,
    'milestoneRate': 0
  }]
};

let engineeringScheduleList = projectData.engineeringScheduleList.map((item) => ({
  ...item,
  _type: 'engineering',
  _id: item.engineeringScheduleId,
  _name: item.engineeringName,
  _isExpanded: false,
  processSchedules: item.processSchedules.map((processItem) => ({
    ...processItem,
    _type: 'process',
    _id: processItem.processScheduleId,
    _parentId: item.engineeringScheduleId,
    _name: processItem.processScheduleName,
    _isExpanded: false,
  })),
}));
const projectMilestoneList = [...projectData.projectMilestoneList.map((item) => ({
  name: item.name,
  xAxis: new Date(item.deadline).getTime(),
})), {
  name: '今日',
  xAxis: new Date().getTime(),
}];

// 记住datazoom的x轴偏移量
let dataZoomStart = 0;
const valueSpanIndex = 5;

const renderChart = start => {
  // dataZoom
  const dayTimestamp = 24 * 60 * 60 * 1000;
  // 全屏时手势更改的时间范围
  const VALUE_SPAN_ARRAY = Array.from({ length: 6 }, (_, i) => dayTimestamp * 30 * 6.5 / Math.pow(2, 5 - i));
  const dataZoomX = [
    {
      type: 'slider',
      show: false,
      filterMode: 'none', // 不过滤数据，只改变数轴范围。
      xAxisIndex: [0, 1],
      start,
      // end: 100,
      // 坐标轴上最大和最小间隔相同 保证固定展示数量 且.5带来可滑动的观感
      minValueSpan: VALUE_SPAN_ARRAY[valueSpanIndex],
      maxValueSpan: VALUE_SPAN_ARRAY[valueSpanIndex],
    },
    {
      id: 'zoomX',
      type: 'inside',
      filterMode: 'none',
      xAxisIndex: [0, 1],
      zoomLock: true,
      preventDefaultMouseMove: false,
    },
  ];
  const dataZoomY = [
    {
      type: 'slider',
      show: false,
      filterMode: 'none', // 不过滤数据，只改变数轴范围。
      yAxisIndex: 0,
      // 全屏时Y轴可以滑动
      minValueSpan: window.innerHeight / 80,
      maxValueSpan: window.innerHeight / 80,
    },
    {
      type: 'inside',
      filterMode: 'none',
      yAxisIndex: 0,
      zoomLock: true,
      // 全屏时Y轴可以滑动
      moveOnMouseMove: true,
      preventDefaultMouseMove: true,
    }
  ];
  const dataZoom = [
    ...dataZoomX,
    ...dataZoomY,
  ];
  
  // grid
  const FULLSCREEN_GRID_LEFT = 210;
  // 为了全屏时左侧设置背景色 将左右两侧方向设置0
  const grid = {
    top: 6,
    right: 0,
    bottom: 0,
    left: FULLSCREEN_GRID_LEFT,
    containLabel: true,
  };
  
  // xAxis
  const xAxisMin = new Date(new Date(projectData.startDate).setDate(1)).getTime(); // 当月1号
  const xAxisBase = {
    type: 'time',
    position: 'top',
    // z: 10,
    min: xAxisMin,
    // min: 1609430400000, // 2021-01-01
    // max: 1640880000000, // 2021-12-31
    axisLabel: {
      margin: 6,
      formatter: '{yyyy}.{MM}',
      color: '#6F6F6F',
      fontSize: 10,
      align: 'left',
    },
    axisLine: {
      show: false,
    },
    axisTick: {
      show: false,
    },
    splitArea: {
      show: false,
    },
  };
  const xAxis = [
    {
      ...xAxisBase,
      minInterval: dayTimestamp * 7,
      // maxInterval: dayTimestamp * 7,
      // splitNumber: 3,
      axisLabel: {
        show: true,
        margin: 12,
        // formatter: '{yyyy}.{MM}',
        formatter() {
          return valueSpanIndex >= 5 ? '{yyyy}.{MM}' : '{yyyy}.{MM}.{dd}';
        },
        hideOverlap: true, // 避免重叠
        color: '#848484',
        fontSize: 10,
        align: 'left',
      },
      axisLine: {
        show: true,
        lineStyle: {
          color: '#DCDFE7',
          width: 18,
          cap: 'butt',
        },
      },
    },
    {
      ...xAxisBase,
      offset: 28,
      // 时间区间较小时(valueSpanIndex <= 3) 直接赋值splitNumber最小 避免展示过多 这里最好还是把季度去掉 没有任何意义
      minInterval: valueSpanIndex > 3 ? dayTimestamp * 30 * 4 : undefined,
      maxInterval: valueSpanIndex > 3 ? dayTimestamp * 30 * 4 : undefined,
      splitNumber: valueSpanIndex <= 3 && 1,
      axisLabel: {
        margin: 4,
        // echarts自带季度有bug
        // formatter: 'Q{Q}',
        formatter(value) {
          const month = new Date(value).getMonth();
          if (month < 3) {
            return 'Q1';
          } else if (month < 6) {
            return 'Q2';
          } else if (month < 9) {
            return 'Q3';
          } else {
            return 'Q4';
          }
        },
        // showMinLabel: false,
        // showMaxLabel: false,
        color: '#848484',
        fontSize: 12,
        align: 'left',
      },
      axisLine: {
        show: true,
        lineStyle: {
          color: '#EAEAEA',
          width: 0.5,
        },
      },
    },
  ];
  
  // yAxis
  const yAxis = {
    // 这里设置false会影响splitArea展示
    // show: false,
    // 这行data去掉滑动就很顺畅 通过min & max参数定义Y轴
    // data: engineeringScheduleList.value.map((item) => item._name),
    inverse: true,
    interval: 1,
    axisLabel: {
      show: false,
    },
    axisLine: {
      show: false,
    },
    axisTick: {
      show: false,
    },
    splitLine: {
      show: false,
    },
    splitArea: {
      show: true,
      areaStyle: {
        color: engineeringScheduleList.map((item) => {
          if (item._type === 'engineering' && !item._isExpanded) {
            return 'white';
          } else {
            return item.status === 1 ? '#FFEEEE' : '#EBF3FE';
          }
        }),
      },
    },
    min: 0,
    max: engineeringScheduleList.length,
  };
  
  // series
  const STATUS_MAP = ['未开始', '进行中', '已完工', '待确认', '已拒绝'];
  const renderCircleItem = (isShowCircle, isExpanded, status) => {
    return {
      type: 'circle',
      z2: 3,
      textContent: {
        style: {
          y: -1.6,
          text: isExpanded ? '-' : '+',
          textFill: status === 1 ? '#FF6E6E' : '#3688F6',
          fontSize: '16px',
        },
      },
      textConfig: {
        position: 'inside',
      },
      shape: {
        // cx: 0,
        // cy: 0,
        r: 8,
      },
      style: {
        fill: status === 1 ? '#FFEEEE' : '#EBF3FE',
      },
      ignore: !isShowCircle,
    };
  };
  // for more details, see https://echarts.apache.org/examples/zh/editor.html?c=custom-gantt-flight
  const renderGanttItem = (params, api) => {
    // clip rect outside canvas when dragging!
    // function clipRectByRect(params, rect) {
    //   return echarts.graphic.clipRectByRect(rect, {
    //     x: params.coordSys.x,
    //     y: params.coordSys.y,
    //     width: params.coordSys.width,
    //     height: params.coordSys.height,
    //   });
    // }
    const yIndex = params.dataIndexInside; // y轴数据index值
    const { _type, _name, _isExpanded, actuleRatio: actualRatio = 0, status, processSchedules } = engineeringScheduleList[yIndex];
    const isShowCircle = _type === 'engineering' && !!processSchedules.length;
    const startDate = api.coord([api.value(0), yIndex]); // 开始时间数值转换成坐标系上的点
    const endDate = api.coord([api.value(1), yIndex]); // 结束时间数值转换成坐标系上的点
    const barLength = endDate[0] - startDate[0]; // 长度
    const yIntervalHeight = api.size([0, 1])[1]; // y轴间隔距离，单位为1应得到的长度；x轴为0得到0略过
    const barHeight = yIntervalHeight * (_type === 'engineering' ? 0.48 : 0.24); // 柱状图高度由y轴间隔高度乘以系数得到
    const [x, y] = startDate;
    const text = `${actualRatio || 0}% (${STATUS_MAP[status]})`;
    const textWidth = text.length * 11 + (isShowCircle ? 24 : 4); // 计算path的长度 这里无法找到方法自适应 within my capacity oops~
  
    return {
      type: 'group',
      id: 'ganttItem',
      position: [x, y + (yIntervalHeight - barHeight) / 2],
      children: [
        {
          type: 'rect',
          textContent: {
            style: {
              text,
              textFill: '#323232',
            },
            ignore: _type === 'process',
          },
          textConfig: {
            position: 'insideLeft',
          },
          shape: {
            width: barLength,
            height: barHeight,
            r: 3, // 设置圆角矩形
          },
          style: {
            fill: status === 1 ? (_type === 'engineering' ? '#FF6E6E' : '#FFA8A8') : (_type === 'engineering' ? '#378DFF' : '#9AC3FA'),
          },
        },
        {
          type: 'rect',
          shape: {
            width: barLength * actualRatio / 100,
            height: barHeight / 3,
            r: 3, // 设置圆角矩形
          },
          style: {
            fill: status === 1 ? '#E64A4A' : '#006CCF',
          },
          ignore: !actualRatio, // 非全屏时展示; 全屏且勾选实际进度明细时展示;
        },
      ],
    };
  };
  const renderAxisLabelItem = (params, api) => {
    const yIndex = params.dataIndexInside; // y轴数据index值
    const { _type, _name, _isExpanded, status, processSchedules } = engineeringScheduleList[yIndex];
    const isShowCircle = _type === 'engineering' && !!processSchedules.length;
    const y = api.coord([0, api.value(0)])[1];
  
    const AXIS_LABEL_LEFT = 24;
    const AXIS_LABEL_RIGHT = 6;
    const AXIS_LABEL_HEIGHT = api.size([0, 1])[1] * 0.8;
  
    // 裁掉超出y轴坐标系的部分
    if (y < params.coordSys.y - AXIS_LABEL_HEIGHT) {
      return;
    }
  
    return {
      type: 'group',
      position: [AXIS_LABEL_LEFT, y + AXIS_LABEL_HEIGHT / 8 /* 高度占比0.8 居中上下各留0.1 所以除以8 */],
      children: [
        _type === 'engineering' ? {
          type: 'rect',
          z2: 1,
          shape: {
            width: FULLSCREEN_GRID_LEFT - AXIS_LABEL_LEFT - AXIS_LABEL_RIGHT,
            height: AXIS_LABEL_HEIGHT,
            r: 3,
          },
          style: {
            fill: 'white',
          },
        } : {
          type: 'group',
          children: [
            {
              type: 'polyline',
              shape: {
                points: [[10, -48], [10, AXIS_LABEL_HEIGHT / 2], [16, AXIS_LABEL_HEIGHT / 2]],
              },
              style: {
                fill: 'transparent',
                stroke: '#D6D6D6',
              },
            },
            {
              type: 'circle',
              shape: {
                cx: 20,
                cy: AXIS_LABEL_HEIGHT / 2,
                r: 2,
              },
              style: {
                fill: status === 1 ? '#FF5252' : '#3688F6',
              },
            },
          ],
        },
        {
          type: 'group',
          position: [12, AXIS_LABEL_HEIGHT / 2],
          children: [
            renderCircleItem(isShowCircle, _isExpanded, status),
            {
              type: 'text',
              z2: 3,
              style: {
                x: _type === 'engineering' ? 12 : 16,
                y: -6,
                text: _name,
                textFill: _type === 'engineering' ? '#323232' : '#5B5B5B',
                fontWeight: _type === 'engineering' && 'bold',
              },
            },
          ],
        },
        {
          type: 'text',
          z2: 5,
          style: {
            x: FULLSCREEN_GRID_LEFT - AXIS_LABEL_LEFT - AXIS_LABEL_RIGHT - 12,
            y: AXIS_LABEL_HEIGHT / 2 - 8,
            text: '>',
            textFill: '#D6D6D6',
          },
        },
      ],
    };
  };
  const markLine = {
    symbol: ['emptyCircle'],
    animation: false,
    data: projectMilestoneList.map((item) => ({
      ...item,
      y: 40,
      label: {
        show: false,
        silent: true, // 不响应和触发鼠标事件
        position: 'start',
      },
      lineStyle: {
        color: '#F2BA40',
        opacity: 0.5,
      },
      emphasis: {
        label: {
          show: true,
          opacity: 1,
          formatter(params) {
            return `{a|${params.name}}` + '\n' + `{b|${new Date(params.value).getMonth() + 1}.${new Date(params.value).getDate()}}`;
          },
          rich: {
            a: {
              color: '#464646',
              fontSize: 16,
            },
            b: {
              color: '#999',
              fontSize: 10,
              padding: [2, 0, 2, 0],
            },
          },
        },
        lineStyle: {
          color: '#205294',
        },
      },
    })),
  };
  const seriesBase = {
    type: 'custom',
    clip: true, // 裁掉所有超出坐标系的部分
    // custom can only use Array but not Object data format! 
    // dimensions: 0 startDate 1 endDate
    data: engineeringScheduleList.map((item) => [new Date(item.startDate).getTime(), new Date(item.endDate).getTime()]),
    renderItem: renderGanttItem,
    xAxisIndex: 0,
    encode: { // 不可删 对应zoomdata
      x: [0, 1],
      y: 0,
    },
    markLine,
  };
  const series = [
    {
      ...seriesBase,
      markLine: {
        ...markLine,
        data: markLine.data.map((item) => ({
          ...item,
          y: 44,
          emphasis: {
            label: {
              show: false,
            },
          },
        })),
      },
    },
    // just for xAxis Q1-4
    {
      type: 'custom',
      data: engineeringScheduleList.map((item) => [new Date(item.startDate).getTime(), new Date(item.endDate).getTime()]),
      renderItem: () => { return null },
      xAxisIndex: 1,
      encode: {
        x: [0, 1],
        y: 0,
      },
    },
    {
      type: 'custom',
      data: engineeringScheduleList.map((_, index) => [index]),
      renderItem: renderAxisLabelItem,
      encode: {
        x: -1,
        y: 0
      },
    },
  ];
  
  myChart.setOption({
    dataZoom,
    grid,
    xAxis,
    yAxis,
    series,
    backgroundColor: '#F8F9FB',
  });
};
const resizeChart = () => {
  setTimeout(() => {
    myChart.resize({ height: window.innerHeight });
  });
};

renderChart();
resizeChart();

myChart.on('click', 'series.custom', event => {
  // 仅工程工序项
  if (event.componentSubType !== 'custom') return;
  const index = event.dataIndex;
  const selectedItem = engineeringScheduleList[index];
  if (selectedItem._type === 'engineering') {
    // 工程下无工序情况
    if (!selectedItem.processSchedules.length) return;

    if (selectedItem._isExpanded) {
      engineeringScheduleList = engineeringScheduleList.filter(item => item._parentId !== selectedItem._id);
    } else {
      engineeringScheduleList.splice(index + 1, 0, ...selectedItem.processSchedules);
    }
    engineeringScheduleList[index]._isExpanded = !engineeringScheduleList[index]._isExpanded;
    renderChart(dataZoomStart);
    resizeChart();
  } else {
    emit('clickProcess', selectedItem);
  }
});
myChart.on('dataZoom', event => {
  if (!event.batch) return;
  dataZoomStart = event.batch[0].start;
});